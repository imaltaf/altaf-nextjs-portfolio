pipeline {
    agent {
        label 'ghost-linux'
    }

    
    stages {
        stage('Clean Workspace') {
            steps {
                cleanWs()
            }
        }

        stage('Clone Repository') {
            steps {
                script {
                    git(url: 'https://github.com/imaltaf/altaf-nextjs-portfolio.git', branch: 'main')
                }
            }
        }

        
        stage('Clean Up and Redeploy') {
            steps {
                script {
                    // Stop and remove existing containers
                    sh 'docker-compose up --build -d'

                }
            }
        }
    }

    post {
        success {
            echo 'Pipeline succeeded! Add further actions here if needed.'
        }

        failure {
            echo 'Pipeline failed! Add further error handling here if needed.'
        }
    }
}
